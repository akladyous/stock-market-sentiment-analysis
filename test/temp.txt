apple_hist_df[apple_hist_df.index.month == 5]
c=apple_hist_df['close']
apple_hist_df.loc['2020']

apple_hist_df['close'].resample("M").asfreq()

-----------------------------------------------------
from statsmodels.tsa.stattools import adfuller
result = adfuller(apple_hist_df['close'])
print('ADF Statistic: %f' % result[0])
print('p-value: %f' % result[1])
print('Critical Values:')
for key, value in result[4].items():
	print('\t%s: %.3f' % (key, value))


-----------------------------------------------------
rm = apple_hist_df['close'].rolling(30).mean()
rs = apple_hist_df['close'].rolling(30).std()

#plot close price
fig, ax = plt.subplots(figsize=(12,5))
# plt.figure(figsize=(10,6))
plt.grid(False)
plt.xlabel('Dates')
plt.ylabel('Close Prices')
ax.set_title("Apple Closing Price")
plt.xticks(rotation=45)
plt.plot(apple_hist_df['close'], color='b')
plt.plot(rm, color='r')
plt.plot(rs, color='g')
plt.show()
-----------------------------------------------------
fin = Finnhub(finnhub_key, "2019-01-01", "2021-06-01", "AAPL")
aapl_daily = fin.stock_candles("D")

hist_cols = ['close', 'high', 'low', 'open', 'status','date', 'volume']
aapl_dayly_df = pd.DataFrame(stock_candle)
aapl_dayly_df.columns = hist_cols
aapl_dayly_df['date'] = aapl_dayly_df['date'].apply(lambda x: timestamp2datetime(x))
aapl_dayly_df['date'] = pd.to_datetime(aapl_dayly_df['date'], format='%Y-%m-%d %H:%M:%S').dt.normalize()
aapl_dayly_df.set_index('date', inplace=True)
-----------------------------------------------------
fin_5m = Finnhub(finnhub_key, "2021-05-01", "2021-05-31", "AAPL")
aapl_5m = fin_5m.stock_candles("5")

hist_cols = ['close', 'high', 'low', 'open', 'status','date', 'volume']
aapl_5m_df = pd.DataFrame(aapl_5m)
aapl_5m_df.columns = hist_cols
aapl_5m_df['date'] = aapl_5m_df['date'].apply(lambda x: timestamp2datetime(x))
aapl_5m_df['date'] = pd.to_datetime(aapl_5m_df['date'], format='%Y-%m-%d %H:%M:%S')#.dt.normalize()
aapl_5m_df.set_index('date', inplace=True)
-----------------------------------------------------


